/**
 * Copyright (c) 2019, Travis Clarke
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.SagaMonitor={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){a(e,t,n[t])})}return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function d(e){return y(e)||p(e)||h()}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function p(e){
if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(e,t){void 0===t&&(t=!0);var n,o=new Promise(function(o){n=setTimeout(o,e,t)});return o[_]=function(){clearTimeout(n)},o}function v(e,t,n){if(!t(e))throw Error(n)}function E(e,t){var n,o=null;return F(e)?n=e:(H(e)?(o=e[0],n=e[1]):(o=e.context,n=e.fn),o&&K(n)&&F(o[n])&&(n=o[n])),{context:o,fn:n,args:t}}function b(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return"production"!==process.env.NODE_ENV&&(v(e,oe,"instead of writing `yield call(delay, "+n[0]+")` where delay is an effect from `redux-saga/effects` you should write `yield delay("+n[0]+")`"),ne("call",e)),te(Z,E(e,n))}function m(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(console.group){var o;(o=console).group.apply(o,t)}else{var r;console.log(""),(r=console).log.apply(r,[ce+ie].concat(t)),ce+=fe}}function S(){console.groupEnd?console.groupEnd():ce=ce.substr(0,ce.length-fe.length)}function C(e){return"function"==typeof e?"".concat(e.name):"string"==typeof e?"'".concat(e,"'"):e}function T(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"===t(e)||null===e||void 0===e}function O(e,t){0===e.getRootIds().length&&console.log("Saga monitor: No effects to log"),console.log(""),console.log("Saga monitor:",Date.now(),(new Date).toISOString());var n=!0,o=!1,r=void 0;try{for(var a,c=e.getRootIds()[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){R(e,a.value,t)}}catch(e){o=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}console.log("")}function R(e,t,n){var o=e.get(t),r=e.getChildIds(t),a=w(o,n);if(0===r.length){var c;(c=console)[a.logMethod].apply(c,d(a.getLog()))}else{m.apply(void 0,d(a.getLog()));var f=!0,i=!1,l=void 0;try{for(var s,u=r[Symbol.iterator]();!(f=(s=u.next()).done);f=!0){R(e,s.value,n)}}catch(e){i=!0,l=e}finally{try{
f||null==u.return||u.return()}finally{if(i)throw l}}S()}}function w(e,t){var n=e.status===Q,o=e.status===B,r=new de(n,o,t);if(r.addLabel(e.winner?o?"‚úò":"‚úì":"").addLabel(e.label),e.root)r.addEffectType("root").resetStyle().addCall(e.saga.name,e.args).addDescResult(e);else if(G(e.effect))r.addValue(e.effect.name).addDescResult(e,!0);else if(X(e.effect))r.addEffectType("promise").resetStyle().addDescResult(e);else if($(e.effect)){var a=e.effect,c=a.type,f=a.payload;if(c===ee.TAKE)r.addEffectType("take").resetStyle().addValue(null==f.channel?f.pattern:f).addDescResult(e);else if(c===ee.PUT)r.addEffectType("put").resetStyle().addDescResult(Object.assign({},e,{result:f}));else if(c===ee.ALL)r.addEffectType("all").resetStyle().addDescResult(e,!0);else if(c===ee.RACE)r.addEffectType("race").resetStyle().addDescResult(e,!0);else if(c===ee.CALL)r.addEffectType("call").resetStyle().addCall(f.fn.name,f.args).addDescResult(e);else if(c===ee.CPS)r.addEffectType("cps").resetStyle().addCall(f.fn.name,f.args).addDescResult(e);else if(c===ee.FORK)r.addEffectType(f.detached?"spawn":"fork").resetStyle().addCall(f.fn.name,f.args).addDescResult(e);else if(c===ee.JOIN)r.addEffectType("join").resetStyle().addDescResult(e);else if(c===ee.CANCEL)r.addEffectType("cancel").resetStyle().appendData(f.name);else if(c===ee.SELECT)r.addEffectType("select").resetStyle().addCall(f.selector.name,f.args).addDescResult(e);else if(c===ee.ACTION_CHANNEL)r.addEffectType("actionChannel").resetStyle().addValue(null==f.buffer?f.pattern:f).addDescResult(e);else if(c===ee.CANCELLED)r.addEffectType("cancelled").resetStyle().addDescResult(e);else if(c===ee.FLUSH)r.addEffectType("flush").resetStyle().addValue(f).addDescResult(e);else if(c===ee.GET_CONTEXT)r.addEffectType("getContext").resetStyle().addValue(f).addDescResult(e);else{if(c!==ee.SET_CONTEXT)throw Error("Invalid effect type ".concat(c));r.addEffectType("setContext").resetStyle().addValue(f).addDescResult(e,!0)}}else r.addEffectType("unknown").resetStyle().addDescResult(e);return r}function D(){
return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()}function L(e){var t=D();Object.assign(e,{end:t,duration:t-e.start})}function A(e,t){var n=ge.get(e);J(t)?t.toPromise().then(function(n){t.isCancelled()?I(e):A(e,n)},function(t){return N(e,t)}):(L(n),n.status=z,n.result=t,ae(n.effect)&&j(e,t))}function N(e,t){var n=ge.get(e);L(n),n.status=B,n.error=t,ae(n.effect)&&j(e,t)}function I(e){var t=ge.get(e);L(t),t.status=Q}function j(e,t){var n=Object.keys(t)[0],o=!0,r=!1,a=void 0;try{for(var c,f=ge.getChildIds(e)[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var i=c.value,l=ge.get(i);l.label===n&&(l.winner=!0)}}catch(e){r=!0,a=e}finally{try{o||null==f.return||f.return()}finally{if(r)throw a}}}function x(){function e(e){d&&console[l]("%c Root saga started:",E,e.saga.name||"anonymous",e.args),ge.setRootEffect(e.effectId,Object.assign({},e,{status:q,start:D()}))}function t(e){y&&console[l]("%c effectTriggered:",E,e),ge.set(e.effectId,Object.assign({},e,{status:q,start:D()}))}function n(e,t){p&&console[l]("%c effectResolved:",E,e,t),A(e,t)}function o(e,t){h&&console[l]("%c effectRejected:",E,e,t),N(e,t)}function r(e){g&&console[l]("%c effectCancelled:",E,e),I(e)}function a(e){v&&console[l]("%c actionDispatched:",E,e)}var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c({},ve,f),l=i.level,s=i.verbose,u=i.color,d=i.rootSagaStart,y=i.effectTrigger,p=i.effectResolve,h=i.effectReject,g=i.effectCancel,v=i.actionDispatch,E=["color: ".concat(u),"font-weight: bold"].join(";");return he&&(s&&console[l]("View Sagas by executing %c$$LogSagas()",pe,"in the console"),he.$$LogSagas=function(){return O(ge,u)}),{rootSagaStarted:e,effectTriggered:t,effectResolved:n,effectRejected:o,effectCancelled:r,actionDispatched:a}}var k=function(e){return"@@redux-saga/"+e},_=k("CANCEL_PROMISE"),P=k("IO"),V=k("TASK"),M=function(e){return null!==e&&void 0!==e},F=function(e){return"function"==typeof e},K=function(e){return"string"==typeof e},H=Array.isArray,U=function(e){return e&&!H(e)&&"object"==typeof e
},X=function(e){return e&&F(e.then)},G=function(e){return e&&F(e.next)&&F(e.throw)},J=function(e){return e&&e[V]},$=function(e){return e&&e[P]},q="PENDING",z="RESOLVED",B="REJECTED",Q="CANCELLED",W="undefined"!=typeof window&&window.document,Y="undefined"!=typeof navigator&&"ReactNative"===navigator.product,Z="CALL",ee=Object.freeze({TAKE:"TAKE",PUT:"PUT",ALL:"ALL",RACE:"RACE",CALL:Z,CPS:"CPS",FORK:"FORK",JOIN:"JOIN",CANCEL:"CANCEL",SELECT:"SELECT",ACTION_CHANNEL:"ACTION_CHANNEL",CANCELLED:"CANCELLED",FLUSH:"FLUSH",GET_CONTEXT:"GET_CONTEXT",SET_CONTEXT:"SET_CONTEXT"}),te=function(e,t){var n;return n={},n[P]=!0,n.combinator=!1,n.type=e,n.payload=t,n},ne=function(e,t){if(v(t,M,e+": argument fn is undefined or null"),!F(t)){var n,o=null;if(H(t))o=t[0],n=t[1],v(n,M,e+": argument of type [context, fn] has undefined or null `fn`");else{if(!U(t))return void v(t,F,e+": argument fn is not function");o=t.context,n=t.fn,v(n,M,e+": argument of type {context, fn} has undefined or null `fn`")}if(o&&K(n))return void v(o[n],F,e+': context arguments has no such method - "'+n+'"');v(n,F,e+": unpacked fn argument (from [context, fn] or {context, fn}) is not a function")}},oe=function(e){return e!==re},re=b.bind(null,g),ae=function(e){return $(e)&&e.type===ee.RACE},ce="",fe="   ",ie="‚ñº",le=function(){function e(){n(this,e),this.logs=[],this.suffix=[]}return r(e,[{key:"add",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!W&&"string"==typeof e){var r=e;e=e.replace(/^%c\s*/,""),e!==r&&n.shift()}return this.logs.push({msg:e,args:n}),this}},{key:"appendData",value:function(){var e;return(e=this.suffix).push.apply(e,arguments),this}},{key:"addValue",value:function(e){return T(e)?this.add(e):W?this.add("%O",e):this.add("%s",require("util").inspect(e)),this}},{key:"addCall",value:function(e,t){var n=this;return t.length?(this.add(e),this.add("("),t.forEach(function(e,o){n.addValue(C(e)),n.addValue(o===t.length-1?")":", ")})):this.add("".concat(e,"()")),this}},{key:"getLog",
value:function(){var e=[],t=[],n=!0,o=!1,r=void 0;try{for(var a,c=this.logs[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var f=a.value,i=f.msg,l=f.args;e.push(i),t.push.apply(t,d(l))}}catch(e){o=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return[e.join("")].concat(t,d(this.suffix))}}]),e}(),se="color: red",ue="color: #ccc",de=function(e){function t(e,o){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n(this,t),r=u(this,i(t).call(this)),r.theme="color: ".concat(a),r.logMethod=o?"error":"log",r.styleOverride=function(t){return e?ue:o?se:t},r}return f(t,e),r(t,[{key:"resetStyle",value:function(){return this.add("%c",this.styleOverride("color: inherit"))}},{key:"addLabel",value:function(e){return e?this.add("%c ".concat(e," "),this.styleOverride("color: inherit")):this}},{key:"addEffectType",value:function(e){return this.add("%c ".concat(e," "),this.styleOverride(this.theme))}},{key:"addDescResult",value:function(e,t){var n=e.status,o=e.result,r=e.error,a=e.duration;return n!==z||t?n===B?this.appendData("üõë",r):n===q?this.appendData("‚åõ"):n===Q&&this.appendData("‚ö†Ô∏è Cancelled!"):H(o)?(this.addValue("‚û°Ô∏è"),this.addValue(o)):this.appendData("‚û°Ô∏è",o),n!==q&&this.appendData("(".concat(a.toFixed(2),"ms)")),this}}]),t}(le),ye=function(){function e(){n(this,e),this.rootIds=[],this.map={},this.childIdsMap={}}return r(e,[{key:"get",value:function(e){return this.map[e]}},{key:"set",value:function(e,t){this.map[e]=t,null==this.childIdsMap[t.parentEffectId]&&(this.childIdsMap[t.parentEffectId]=[]),this.childIdsMap[t.parentEffectId].push(e)}},{key:"setRootEffect",value:function(e,t){this.rootIds.push(e),this.set(e,Object.assign({root:!0},t))}},{key:"getRootIds",value:function(){return this.rootIds}},{key:"getChildIds",value:function(e){return this.childIdsMap[e]||[]}}]),e}(),pe="font-weight: bold",he=W?window:Y?global:null,ge=new ye,ve={level:"debug",color:"#03A9F4",verbose:!0,rootSagaStart:!1,effectTrigger:!1,effectResolve:!1,effectReject:!1,effectCancel:!1,actionDispatch:!1}
;x.VERSION="2.0.1",O.VERSION="2.0.1",e.logSaga=O,e.default=x,Object.defineProperty(e,"__esModule",{value:!0})});